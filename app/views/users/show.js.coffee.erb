# Copyright 2014 Square Inc.
#
#    Licensed under the Apache License, Version 2.0 (the "License");
#    you may not use this file except in compliance with the License.
#    You may obtain a copy of the License at
#
#        http://www.apache.org/licenses/LICENSE-2.0
#
#    Unless required by applicable law or agreed to in writing, software
#    distributed under the License is distributed on an "AS IS" BASIS,
#    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
#    See the License for the specific language governing permissions and
#    limitations under the License.

$(document).ready () ->
  setupLocaleField = () ->
    $("#user_approved_rfc5646_locales").arrayField(
      renderer: (container, name, value) ->
        text_field = $('<input/>').attr('type', 'text')
                                  .attr('name', name)
                                  .addClass('locale-field')
                                  .val(value)
        text_field.appendTo container
        new LocaleField(text_field)
        return text_field
    )
  if (window.localesLoaded) 
    setupLocaleField()
  else 
    $(document).bind('locales_loaded', setupLocaleField);
  
#   var setupArrayField = function() {
#     $('#user_approved_rfc5646_locales').addClass('array-field').arrayField({
#       renderer: function(container, name, value) {
#         new LocaleField(
#             $('<input/>').attr({name: name, placeholder: 'locale'}).val(value).addClass('locale-field').appendTo(container)
#         );
#       }
#     });
#   };

#   if (window.localesLoaded) setupArrayField();
#   else $(document).bind('locales_loaded', setupArrayField);
# });
